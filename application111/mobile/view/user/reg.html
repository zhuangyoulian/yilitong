<include file="public/header" title="注册" body="g4"/>
<!-- 手机购物车居中新版layer.js框架 start -->


<!-- 手机购物车居中新版layer.js框架 end -->
<style>
    body{
        background: #fff !important;
    }
    #verify_code_img{
        padding: .55467rem .21333rem;
        width: 4.6rem;
        height: 2.9rem;
        color: white;
        border-radius: .128rem;
        background: green;
    }
    .layui-m-layerchild{
        width:80%;
    }
    .layui-m-layerchild h3{
        font-size:.6rem;
    }
    .layui-m-layerchild .layui-m-layercont{
        font-size:.7rem;
    }

    /* ***********  头部 start ************ */
    .collect-goods-title{
        width: 100%;
        height: 1.6rem;
        line-height: 1.6rem;
        text-align: center;
        font-size: .64rem;
        position: relative;
        border-bottom: 1px solid #efefef;
    }
    .collect-goods-title a{
        position: absolute;
        left: .8rem;
        top: .4rem;
        display: block;
        width: .44rem;
        height: .8rem;
        background: url(__MOBILE__/images/btn_more@3x.png) no-repeat;
        background-size: 100% auto;
        -webkit-background-size: 100% auto;
        -moz-background-size: 100% auto;
        -o-background-size: 100% auto;
        -ms-background-size: 100% auto;
        transform: rotate(180deg);
        -webkit-transform: rotate(180deg);
        -moz-transform: rotate(180deg);
        -o-transform: rotate(180deg);
        -ms-transform: rotate(180deg);
    }
    /* ***********  头部 end************ */

    .loginsingup-input .content30 .lsu{
        border-bottom: 1px solid #efefef;
        padding: .2rem 0;
    }
    .loginsingup-input .content30 .lsu input{
        padding-left: 1.2rem;
    }
    .loginsingup-input .content30 .lsu:nth-of-type(1) input{
        background: url(__MOBILE__/images/icon_telephone_register@2x.png) no-repeat .2rem center;
    }
    .loginsingup-input .content30 .lsu:nth-of-type(2) input{
        background: url(__MOBILE__/images/icon_telephone_Verification-Code@2x.png) no-repeat .2rem center;
    }
    .loginsingup-input .content30 .lsu:nth-of-type(3) input,.loginsingup-input .content30 .lsu:nth-of-type(4) input{
        background: url(__MOBILE__/images/icon_key_register@2x.png) no-repeat .2rem center;
    }
    .loginsingup-input .content30 .lsu:nth-of-type(5) input{
        background: url(__MOBILE__/images/icon_Referee_register@2x.png) no-repeat .2rem center;
    }
    .loginsingup-input .content30 .lsu:nth-of-type(1) input,.loginsingup-input .content30 .lsu:nth-of-type(2) input,.loginsingup-input .content30 .lsu:nth-of-type(3) input,.loginsingup-input .content30 .lsu:nth-of-type(4) input,.loginsingup-input .content30 .lsu:nth-of-type(5) input{
        -webkit-background-size: .6rem auto;
        -moz-background-size: .6rem auto;
        -o-background-size: .6rem auto;
        background-size: .6rem auto;
    }
    .zc_se a{
        border-radius: .6rem;
      	text-decoration: none;
    }

    /* ***********  注册协议 start ************ */
    .reg-agreement{
        width:100%;
        height:100%;
        background:#fff;
        position:relative;
        left:0;
        top:0;
        padding:.8rem .5rem .5rem .5rem;
        font-size:.56rem;
        line-height:.8rem;
        color:#666;
        overflow-y:auto;
    }
    .reg-agreement #agreement-closeIcon{
        display:block;
        width:1rem;
        height:1rem;
        position:absolute;
        right:.8rem;
        top:.3rem;
        overflow:hidden;
    }
    .reg-agreement #agreement-closeIcon img{
        width:100%;
        height:100%;
    }
    .reg-agreement h3{
        text-align:center;
        font-size:.7rem;
        margin-bottom:.5rem;
        color:#333;
    }
    .reg-agreement p{
        color:#333;
        line-height:1rem;
        font-weight:bold;
    }
    /* ***********  注册协议 end ************ */
</style>
<!--注册表单-s-->
<div class="collect-goods-title"><a href="{:Url('/mobile')}"></a>注册</div>
<div class="loginsingup-input singupphone" style="margin-top: 1rem;">
    <form action="" method="post" id="regFrom" >
        <div class="content30" id="tel_tab_div">
            <div class="lsu boo wicheck">
                <input type="text" name="mobile" id="mobile" value="" placeholder="请输入手机号" maxlength="11" class="c-form-txt-normal" onBlur="checkMobilePhone(this.value);">
                <span id="mobile_phone_notice"></span>
            </div>
			<div class="lsu boo zc_se">
                <input type="text"  value="" name="verify_code" placeholder="请输入两位图形验证码" >
                <img src="/index.php?m=Mobile&c=User&a=verify&type=user_reg" id="verify_code_img" onclick="verify()">
            </div>
            <div class="lsu boo zc_se">
                <input type="text" id="mobile_code" value="" name="mobile_code" placeholder="请输入手机验证码" >
                <a rel="mobile" onClick="sendcode(this)">获取验证码</a>
             	 <span id="verify_notice"></span>
            </div>
            <div class="lsu boo wicheck">
                <input type="password" name="password" id="password" value="" placeholder="请设置密码" class="c-form-txt-normal" onBlur="check_password(this.value);">
                <span id="password_notice"></span>
            </div>
            <div class="lsu boo wicheck">
                <input type="password" id="password2" name="password2" value="" placeholder="请再次确认密码" onBlur="check_confirm_password(this.value);">
                <span id="confirm_password_notice"></span>
            </div>
			<div class="lsu boo wicheck">
                <input type="text" name="recommend_code" id="recommend_code" value="{$Request.param.recommend_code}" placeholder="请输入推荐人" maxlength="11" class="c-form-txt-normal">
				<input type="hidden" name="FManagerId" id="FManagerId" value="{$Request.param.FManagerId}" >
            </div>
            <p style="color:#989898;margin-top:.3rem;font-size:.52rem;">推荐人一经填写无法更改（若没有推荐人，请填写9999）</p>
            
            <div class="lsu submit" style="border-bottom:none;">
              	<span id="next_error_info"></span>
                <input type="button" name="" id="" onclick="checkSubmit()" value="注册"/>
            </div>
            <div class="signup-find">
                <p class="recept">注册即视为同意<a href="javascript:void(0);" onclick="regAgreement()">《一礼通会员注册协议》</a></p>
            </div>
        </div>
    </form>
</div>

<div style="position:absolute;left:0;top:0;display:none;" id="reg-agreement-box">
    <div class="reg-agreement">
        <a href="javascript:void(0);" id="agreement-closeIcon" onclick="closeRegAgreement()"><img src="__MOBILE__/images/close-icon.png" alt=""></a>
        <h3>《一礼通会员注册协议》</h3>

        尊敬的客户您好，欢迎您访问深圳一礼通互联科技有限公司网站（以下简称：网站）。在您注册成为网站会员之前，请您务必认真阅读和理解《网站用户注册协议》（以下简称：协议）中所有的条款。您须完全同意协议中所有的条款，才可以注册成为本网站的会员，使用里面的服务。您在网站的注册和操作均将被视为是您对协议所有条款及内容的自愿接受。
        <p>第一条、声明</p>

        （一）网站内在线产品的所有权归深圳一礼通互创科技有限公司所有。<br>
        （二）您在网站进行注册时，一旦点击“我接受”按钮，即表示为您已自愿接受协议中所有的条款和内容。<br>
        （三）协议条款的效力范围仅限于本网站，您在网站的行为均受协议的约束。<br>
        （四）您使用网站服务的行为，即被视为您已知悉本网站的相关公告并同意。<br>
        （五）本网站有权在未提前通知您的情况下修改协议的条款，您每次进入网站在使用服务前，都应先查阅一遍协议。<br>
        （六）本网站有权在未提前通知您的情况下修改、暂停网站部分或全部的服务，且不承担由此产生来自您和第三方的任何责任。<br>
        （七）本网站提供免费注册服务，您的注册均是自愿行为，注册成功后，您可以得到网站更加完善的服务。<br>
        （八）您注册成为会员后账户和密码如有灭失，不会影响到您已办理成功业务的效力，本网站可恢复您的注册账户及相关信息但不承担除此以外的其它任何责任。<br>
        <p>第二条、用户管理</p>
        （一）您在本网站的所有行为都须符合中国的法律法规，您不得利用本网站提供的服务制作、复制、发布、传播以下信息：<br>
        　　1、反对宪法基本原则的；<br>
        　　2、危害国家安全、泄露国家秘密、颠覆国家政权、破坏国家统一的；<br>
        　　3、损害国家荣誉和利益的；<br>
        　　4、煽动民族仇恨、民族歧视、破坏民族团结的；<br>
        　　5、破坏国家宗教政策，宣扬邪教和封建迷信的；<br>
        　　6、散布谣言、扰乱社会秩序、破坏社会稳定的；<br>
        　　7、散布淫秽、色情、赌博、暴力、凶杀、恐怖内容或者教唆犯罪的；<br>
        　　8、侮辱或者诽谤他人，侵害他人合法权益的；<br>
        　　9、以及法律、法规禁止的其他内容；<br>
        （二）您在本网站的行为，还必须符合其它国家和地区的法律规定以及国际法的有关规定。<br>
        （三）不得利用本网站从事以下活动：<br>
        　　1、未经允许，进入他人计算机信息网络或者使用他人计算机信息网络的资源；<br>
        　　2、未经允许，对他人计算机信息网络的功能进行删除、修改或增加；<br>
        　　3、未经允许，对他人计算机信息网络中存储、处理或者传输的数据和应用程序进行删除、修改或者增加；<br>
        　　4、制作、故意传播计算机病毒等破坏性程序的；<br>
        　　5、其他危害计算机信息网络安全的行为；<br>
        （四）遵守本网站其他规定和程序：<br>
        　　1、您对自己在本网站中的行为和操作承担全部责任；<br>
        　　2、您承担责任的形式包括但不仅限于，对受到侵害者进行赔偿、在本网站首先承担了因您的行为导致的行政处罚或侵权损害赔偿责任后，您应给予本网站的等额赔偿；<br>
        　　3、如果本网站发现您传输的信息含有本协议第二条所列内容之一的，本网站有权在不通知您的情况下采取包括但不仅限于向国家有关机关报告、保存有关记录、删除该内容及链接地址、关闭服务器、暂停您账号的操作权限、停止向您提供服务等措施；<br>
        <p>第三条、注册会员权利和义务</p>
        （一）注册会员有权用本网站提供的服务功能。<br>
        （二）注册会员同意遵守包括但不仅限于《中华人民共和国保守国家秘密法》、《中华人民共和国计算机信息系统安全保护条例》、《计算机软件保护条例》、《互联网电子公告服务管理规定》、《互联网信息服务管理办法》等在内的法律、法规。<br>
        （三）您注册时有义务提供完整、真实、的个人信息，信息如有变更，应及时更新。<br>
        （四）您成为注册会员须妥善保管用户名和密码，用户登录后进行的一切活动均视为是您本人的行为和意愿，您负全部责任。<br>
        （五）您在使用本网站服务时，同意且接受本网站提供的各类信息服务。<br>
        （六）您使用本网站时，禁止有以下行为：<br>
        　　1、上载、张贴、发送电子邮件或以其他方式传送含有违反国家法律、法规的信息或资料，这些资料包括但不仅限于资讯、资料、文字、软件、音乐、照片、图形、等（下同）；<br>
        　　2、散布淫秽、色情、赌博、暴力、凶杀、恐怖或者教唆犯罪的资料；<br>
        　　3、冒充任何个人或机构，或以虚伪不实的方式误导他人以为其与任何人或任何机构有关；<br>
        　　4、通过本网站干扰、破坏或限制他人计算机软件、硬件或通讯设备功能的行为；<br>
        　　5、通过本网站跟踪或以其他方式骚扰他人；<br>
        <p>第四条、用户隐私</p>
        我们承诺，对您个人的信息和隐私的安全承担保密义务。未经您授权或同意，本网站不会将您的个人资料信息泄露给第三方，但以下情况除外，且本网站不承担任何责任：<br>
    　　（一）政府单位按照中华人民共和国的法律、行政法规、部门规章、司法解释等规范性法律文件（统称“法律法规”），要求本网站提供的；<br>
    　　（二）由于您将用户和密码告知或泄露给他人，由此导致的个人资料泄露；<br>
    　　（三）包括但不仅限于黑客攻击、计算机病毒侵入或发作、政府管制等不可抗力而造成的用户个人资料泄露、丢失、被盗用或被篡改等；<br>
    　　（四）您通过本网站链接其他网站造成的个人资料泄露以及由此导致的任何法律争议和后果；<br>
    　　（五）为免除他人正在遭受威胁到其生命、身体或财产等方面的危险，所采取的措施；<br>
    　　（六）本网站会与其他网站链接，但不对其他网站的隐私政策及内容负责；<br>
    　　（七）此外，您若发现有任何非法使用您的用户账号或安全漏洞的情况，应立即通告本网站；<br>
    　　（八）由于您自身的疏忽、大意等过错所导致的；<br>
    　　（九）您在本网站的有关记录有可能成为您违反法律法规和本协议的证据；<br>
        <p>第五条、知识产权</p>
        本网站所有的域名、商号、商标、文字、视像及声音内容、图形及图像均受有关所有权和知识产权法律的保护，未经本网站事先以书面明确允许，任何个人或单位，均不得进行复制和使用。<br>
        <p>第六条、法律适用</p>
        （一）协议由本网站的所有人负责修订，并通过本网站公布，您的注册行为即被视为您自愿接受协议的全部条款，受其约束。<br>
        （二）协议的生效、履行、解释及争议的解决均适用中华人民共和国法律。<br>
        （三）您使用网站提供的服务如产生争议，原则上双方协商解决，协商不成可向本网站所有人所在的仲裁机构、人民法院进行调解或提起诉讼。<br>
        （四）协议的条款如与法律相抵触，本网站可进行重新解析，而其他条款则保持对您产生法律效力和约束。<br>
    </div>
</div>
<!--注册表单-s-->
<script type="text/javascript">
    //提交表单
    function checkSubmit()
    {
        if($('#mobile_code').val() == '' || $('#recommend_code').val() == ''){
            $("#next_error_info").html('请填写完整信息').css('color','red');
//            layer.open({title: '系统提示',content: '* 请填写完整信息'});
            return false;
        }
        $.ajax({
            type:'POST',
            url:"/index.php?m=Mobile&c=User&a=reg",
            dataType:'JSON',
            data:$('#regFrom').serialize(),
            success:function(data){
                if(data.status == 1){
                    $("#next_error_info").html("");
                    location.href='/Mobile/User/index';
                }else{
                    $("#next_error_info").html(data.msg).css('color','red');
//					layer.open({title: '系统提示',content: data.msg});
                }
            }
        })
    }
    var flag = false;
    //手机验证
    function checkMobilePhone(mobile){
      	if(!flag){
            $('#mobile_phone_notice').html('');
        }
        if(mobile == ''){
          	$('#mobile_phone_notice').html('手机号码不能为空!').css('color','red');
            //showErrorMsg('* 手机不能空');
            flag = false;
        }else if(checkMobile(mobile)){ //判断手机格式
            $.ajax({
                type : "GET",
                url:"/index.php?m=Home&c=Api&a=issetMobile",//+tab,

                data :{mobile:mobile},// 你的formid 搜索表单 序列化提交
                success: function(data)
                {
                    if(data == '0')
                    {
                      	$('#mobile_phone_notice').html('');
                        flag = true;
                    }else{
                      	$('#mobile_phone_notice').html('手机号已存在!').css('color','red');
					    //layer.open({title: '* 系统提示',content: '手机号已存在'});
                        flag = false;
                    }
                }
            });
        }else{
         	 $('#mobile_phone_notice').html('手机号码格式不正确!').css('color','red');
		    //layer.open({title: '* 系统提示',content: '手机号码格式不正确'});
           flag = false;
        }
    }

    //密码
    function check_password(password) {
        var password = $.trim(password);
        if(password == ''){
//		    layer.open({title: '* 系统提示',content: '密码不能包含空格'});
            $('#password_notice').html('密码不能包含空格').css('color','red');
           flag = false;
        }else if (password.length < 8) {
//		    layer.open({title: '* 系统提示',content: '密码不能少于8个字符。'});
            $('#password_notice').html('密码不能少于8个字符').css('color','red');
           flag = false;
        }else{
            $('#password_notice').html('');
        }
    }

    //验证确认密码
    function check_confirm_password(confirm_password) {
        var password1 = $.trim($('#password').val());
        var password2 = $.trim(confirm_password);
        if (password1 == '') {
//		    layer.open({title: '* 系统提示',content: '密码不能包含空格'});
            $('#confirm_password_notice').html('密码不能包含空格').css('color','red');

           flag = false;
        }
        if (password2.length < 6) {
//		    layer.open({title: '* 系统提示',content: '密码不能少于8个字符。'});
            $('#confirm_password_notice').html('密码不能少于8个字符').css('color','red');
           flag = false;
        }
        if (password2 != password1) {
//		    layer.open({title: '* 系统提示',content: '两次密码不一致'});
            $('#confirm_password_notice').html('两次密码不一致').css('color','red');
           flag = false;
        }else{
            $('#confirm_password_notice').html('');
            flag = true;
        }
    }

    function countdown(obj) {
        var s = 150;
        //改变按钮状态
        obj.disabled = true;
        callback();
        //循环定时器
        var T = window.setInterval(callback,1000);
        function callback()
        {
            if(s <= 0){
                //移除定时器
                window.clearInterval(T);
                obj.disabled=false;
                obj.innerHTML='获取短信验证码';
            }else{
                if(s<=10){
                    obj.innerHTML = '0'+ --s + '秒后再获取';
                }else{
                    obj.innerHTML = --s+ '秒后再获取';
                }
            }
        }
    }

    //短信验证码


    //发送短信验证码
    function sendcode(obj){
			var verify_code = $('#tel_tab_div').find('input[name="verify_code"]').val();
        	
            $.ajax({
                url:'/index.php?m=Home&c=Api&a=send_validate_code&type=1&t='+Math.random()+'&verify_code='+verify_code ,
                type:'post',
                dataType:'json',
                data:{send:$.trim($('#mobile').val()), scene:1},
                success:function(res){
                    if(res.status==1){
                        //成功
                        countdown(obj)
						// 
                      	$('#verify_notice').html(res.msg).css('color','red');
						//layer.open({title: '系统提示',content: res.msg});
                    }else{
                        //失败
                      	$('#verify_notice').html(res.msg).css('color','red');
						//layer.open({title: '系统提示',content: res.msg});
                       // showErrorMsg(res.msg);
                    }
                }
            })
        
    }

    function regAgreement(){
        document.getElementById('reg-agreement-box').style.display = 'block';
    }
    function closeRegAgreement(){
        document.getElementById('reg-agreement-box').style.display = 'none';
    }


   //  普通 图形验证码
        function verify(){
            $('#verify_code_img').attr('src','/index.php?m=mobile&c=User&a=verify&type=user_reg&r='+Math.random());
        }
</script>
	</body>
</html>
